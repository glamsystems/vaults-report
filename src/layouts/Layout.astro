---
import '../styles/global.css'
---

<script is:inline>
  // Debug mode: only on localhost
  if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
    document.documentElement.dataset.debug = 'true';
  }

  const getThemePreference = () => {
    if (typeof localStorage !== 'undefined') {
      const stored = localStorage.getItem('theme');
      if (stored === 'dark') return 'dark';
      if (stored === 'light') return 'light';
      // stored === 'system' or null - use system preference
    }
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  };
  const isDark = getThemePreference() === 'dark';
  document.documentElement.classList[isDark ? 'add' : 'remove']('dark');

  if (typeof localStorage !== 'undefined') {
    const observer = new MutationObserver(() => {
      const isDark = document.documentElement.classList.contains('dark');
      // Only update if not in system mode
      const stored = localStorage.getItem('theme');
      if (stored !== 'system') {
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      }
    });
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
  }
</script>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta -->
    <title>Vaults Report | Vault Infrastructure & Onchain Asset Management</title>
    <meta name="description" content="Open, community-curated effort to map the protocols, managers, and tooling powering vault infrastructure and onchain asset management." />
    <meta name="keywords" content="DeFi, vaults, vault infrastructure, onchain asset management, ERC-4626, yield, curators, tokenized assets" />
    <meta name="author" content="GLAM Systems" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://vaults.report/" />

    <!-- Open Graph -->
    <meta property="og:title" content="Vaults Report | Vault Infrastructure & Onchain Asset Management" />
    <meta property="og:description" content="Open, community-curated effort to map the protocols, managers, and tooling powering vault infrastructure and onchain asset management." />
    <meta property="og:image" content="https://vaults.report/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:url" content="https://vaults.report" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Vaults Report" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter/X -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@vaultsreport" />
    <meta name="twitter:creator" content="@vaultsreport" />
    <meta name="twitter:title" content="Vaults Report | Vault Infrastructure & Onchain Asset Management" />
    <meta name="twitter:description" content="Open, community-curated effort to map the protocols, managers, and tooling powering vault infrastructure and onchain asset management." />
    <meta name="twitter:image" content="https://vaults.report/twitter-card.png" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" sizes="32x32" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#000000" />

    <!-- LLM Discovery -->
    <link rel="alternate" type="text/markdown" href="/llms.txt" title="LLM Summary" />

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Vaults Report",
        "url": "https://vaults.report",
        "description": "Open, community-curated effort to map the protocols, managers, and tooling powering vault infrastructure and onchain asset management.",
        "keywords": ["DeFi", "vaults", "vault infrastructure", "onchain asset management", "ERC-4626", "yield", "curators", "tokenized assets"],
        "publisher": {
          "@type": "Organization",
          "name": "GLAM Systems",
          "url": "https://glam.systems"
        },
        "mainEntity": {
          "@type": "Dataset",
          "name": "Vault Protocol Directory",
          "description": "Database of 100+ vault infrastructure and onchain asset management protocols",
          "url": "https://vaults.report/directory"
        },
        "sameAs": [
          "https://x.com/vaultsreport",
          "https://github.com/glamsystems"
        ]
      }
    </script>

    <!-- Analytics -->
    <script
      defer
      src="https://cloud.umami.is/script.js"
      data-website-id="96aecaed-19f3-459d-b410-dbfc7a4cfbd3"
      data-domains="vaults.report"
    ></script>
  </head>
  <body>
    <slot />
  </body>
</html>
