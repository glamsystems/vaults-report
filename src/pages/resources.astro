---
import Layout from '../layouts/Layout.astro'
import { DashboardLayout } from '../components/layout/DashboardLayout'
import { ResourcesTable } from '../components/resources-table'
import { loadResources } from '../lib/resources'
import { getGroupedDirectory } from '../lib/directory'

const resources = loadResources()
const groupedData = getGroupedDirectory()
const totalProjects = groupedData.reduce((sum, g) => sum + g.items.length, 0)
---

<Layout>
  <DashboardLayout client:load title="Resources" directoryCount={totalProjects} currentPath={Astro.url.pathname}>
    <ResourcesTable client:load data={resources} />
  </DashboardLayout>
</Layout>
