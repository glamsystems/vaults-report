---
import Layout from '../layouts/Layout.astro'
import { DashboardLayout } from '../components/layout/DashboardLayout'
import { DirectoryTable } from '../components/directory-table'
import { getGroupedDirectory } from '../lib/directory'

const groupedData = getGroupedDirectory()
const totalProjects = groupedData.reduce((sum, g) => sum + g.items.length, 0)
---

<Layout>
  <DashboardLayout client:load title="Project Directory" directoryCount={totalProjects}>
    <DirectoryTable client:load data={groupedData} />
  </DashboardLayout>
</Layout>
